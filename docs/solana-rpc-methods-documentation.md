# Solana RPC Methods Documentation

**Source:** https://solana.com/docs/rpc

Essential RPC methods for building the Kora Rent-Reclaim Bot

---

## Table of Contents

1. [Overview](#overview)
2. [HTTP Methods](#http-methods)
3. [Data Structures](#data-structures)
4. [getAccountInfo](#getaccountinfo)
5. [getBalance](#getbalance)
6. [getProgramAccounts](#getprogramaccounts)
7. [getMultipleAccounts](#getmultipleaccounts)
8. [getEpochInfo](#getepochinfo)
9. [getRecentPerformanceSamples](#getrecentperformancesamples)
10. [getSignatureStatuses](#getsignaturestatuses)

---

## Overview

Solana nodes accept HTTP requests using the JSON-RPC 2.0 specification.

**For cloud-hosted applications, use the Sendings Auth.js** library as a convenient interface for the RPC methods to interact with a Solana node. For an PubSub connection to a Solana node, use the **Websocket API**.

---

## RPC HTTP Endpoint

**Default port:** 8899

- **Local Devnet:** http://localhost:8899
- **Mainnet Beta:** http://api.mainnet-beta.solana.com
- **Testnet:** http://api.testnet.solana.com
- **Devnet:** http://api.devnet.solana.com

---

## Request Formatting

To make a JSON-RPC request, send an HTTP POST request with a `Content-Type: application/json` header. The JSON request data should contain 4 fields:

- **jsonrpc:** `<string>` - set to "2.0"
- **id:** `<string>` | `<null>` - a unique client identifier for the request, generated by the client. Typically a string or number, though null is technically allowed but not advised
- **method:** `<string>` - a string containing the RPC method to be invoked
- **params:** `<array>` - a JSON array of ordered parameter values

### Example using curl:

```bash
curl https://api.devnet.solana.com -X POST -H "Content-Type: application/json" -d '
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "getBalance",
  "params": [
    "83astBRguLMdt2h5U1Tpdq5tjFoJ6noeGwaY3mDLVcri"
  ]
}'
```

The response output will be a JSON object with the following fields:

- **jsonrpc:** `<string>` - matching the request specification
- **id:** `<number>` - matching the request identifier
- **result:** `<array>|<number>|<object>|<string>` - requested data or success confirmation

Requests can be sent in batches by sending an array of JSON-RPC request objects as the data for a single POST.

### Example Request

The commitment parameter should be included as the last element in the `params` array:

```bash
curl https://api.devnet.solana.com -X POST -H "Content-Type: application/json" -d '
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "getBalance",
  "params": [
    "83astBRguLMdt2h5U1Tpdq5tjFoJ6noeGwaY3mDLVcri",
    {
      "commitment": "finalized"
    }
  ]
}'
```

---

## Definitions

- **Hash:** A SHA-256 hash of a chunk of data.
- **Pubkey:** The public key of a Ed25519 key-pair.
- **Transaction:** A list of Solana instructions signed by a client keypair to authorize those actions.
- **Signature:** An Ed25519 signature of transaction's payload data including instructions. This can be used to identify transactions.

---

## Configuring State Commitment

For preflight checks and transaction processing, Solana nodes choose which bank state to query based on a commitment requirement set by the client. The commitment describes how finalized a block is at that point in time.

When querying the ledger state, it's recommended to use lower levels of commitment to report progress and higher levels to ensure the state will not be rolled back.

In descending order of commitment (most finalized to least finalized), clients may specify:

- **finalized** - The node will query the most recent block confirmed by supermajority of the cluster as having reached maximum lockout, meaning the cluster has recognized this block as finalized
- **confirmed** - The node will query the most recent block that has been voted on by supermajority of the cluster
- **processed** - The node will query its most recent block. Note that the block may still be skipped by the cluster

For processing many dependent transactions in series, it's recommended to use "confirmed" commitment, which balances speed with rollback safety. For total certainty, it's recommended to use "finalized" commitment.

---

## Default Commitment

If commitment configuration is not provided, the node will **default** to **"finalized"** commitment.

Only methods that query bank state accept the commitment parameter. They are indicated in the API Reference below.

---

## RpcResponse Structure

Many methods that take a commitment parameter return an RpcResponse JSON object comprised of two parts:

- **context:** An RpcResponseContext JSON structure including a `slot` field at which the operation was evaluated.
- **value:** The value returned by the operation itself.

---

## Parsed Responses

Some methods support an `encoding` parameter, and can return account or transaction data in parsed JSON format if `"encoding":"jsonParsed"` is requested and the node has a parser for the owning program. Solana nodes currently support JSON parsing for the following native and SPL programs:

| Program | Account State | Instructions |
|---------|--------------|--------------|
| Address Lookup | v1.0.0 | v1.0.0 |
| BPF Loader | n/a | stable |
| BPF Upgradeable Loader | stable | stable |
| Config | stable | |
| SPL Associated Token Account | n/a | stable |
| SPL Memo | n/a | stable |
| SPL Token | stable | stable |
| SPL Token 2022 | stable | stable |
| Stake | stable | |
| Vote | stable | stable |

The list of account parsers can be found **here**, and instruction parsers **here**.

---

## Filter criteria

Some methods support providing a `filters` object to enable pre-filtering the data returned within the RpcResponse JSON object. The following filters exist:

- **memcmp: <object>** - compares a provided series of bytes with program account data at a particular offset. Fields:
  - **offset: <usize>** - offset into program account data to start comparison
  - **bytes: <string>** - data to match, as encoded string
  - **encoding: <string>** - encoding for filter `bytes` data, either "base58" or "base64". Data is limited in size to 128 or fewer decoded bytes.
  
**NEW:** This field, and `base64` support generally, is only available in solana-core v1.14.0 or newer. Please omit when querying nodes on earlier versions

- **dataSize: <u64>** - compares the program account data length with the provided data size

---

## getAccountInfo

Returns all information associated with the account of provided Pubkey

### params

**string** required - Pubkey of account to query, as base-58 encoded string.

**object** optional - Configuration object.

**commitment** - string
**encoding** - string
**dataSlice** - object
**minContextSlot** - number

### result

**object** | **null** - If the requested account doesn't exist result will be **null**. Otherwise, an object containing:

**data** - string | string[] | encoding | object
**executable** - bool
**lamports** - u64
**owner** - string
**rentEpoch** - u64
**space** - u64

### Example

```bash
curl https://api.devnet.solana.com -s -X \
POST -H "Content-Type: application/json" -d '
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "getAccountInfo",
  "params": [
    "vines1vzrYbzLMRdu58ou5XTby4qAqVRLmqo36NKPTg",
    {
      "encoding": "base58"
    }
  ]
}'
```

### Response

```json
{
  "jsonrpc": "2.0",
  "result": {
    "context": { "apiVersion": "2.0.15", "slot": 341197@ },
    "value": {
      "data": ["", "base58"],
      "executable": false,
      "lamports": 888491465650258,
      "owner": "11111111111111111111111111111111",
      "rentEpoch": 184446073709551615,
      "space": 0
    }
  },
  "id": 1
}
```

---

## getBalance

Returns the lamport balance of the account of provided Pubkey

### params

**string** required - Pubkey of account to query, as base-58 encoded string.

**object** optional - Configuration object.

**commitment** - string
**minContextSlot** - number

### result

**u64** RpcResponse JSON object with `value` field set to the balance.

### Example

```bash
curl https://api.devnet.solana.com -s -X \
POST -H "Content-Type: application/json" -d '
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "getBalance",
  "params": [
    "83astBRguLMdt2h5U1Tpdq5tjFoJ6noeGwaY3mDLVcri",
    {
      "commitment": "finalized"
    }
  ]
}'
```

### Response

```json
{
  "jsonrpc": "2.0",
  "result": {
    "context": { "slot": 1 },
    "value": 0
  },
  "id": 1
}
```

---

## getProgramAccounts

Returns all accounts owned by the provided program Pubkey

### params

**string** required - Pubkey of program, as base-58 encoded string

**object** optional - Configuration object containing the following fields:

**commitment** - string
**minContextSlot** - number
**withContext** - bool
**encoding** - string
**dataSlice** - object
**filters** - array

### result

**array** - By default, returns an array of JSON objects. If **withContext** flag is set, the array will be wrapped in an RpcResponse JSON object. Each object contains:

**pubkey** - string
**account** - object

### Example

```bash
curl https://api.devnet.solana.com -s -X \
POST -H "Content-Type: application/json" -d '
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "getProgramAccounts",
  "params": [
    "4Nd1mBQtrMJVYVfKf2PJy9NZUZdTAsp7D4xWLs4gDB4T",
    {
      "commitment": "finalized",
      "filters": [
        { "dataSlize": 17 },
        {
          "memcmp": {
            "offset": 4,
            "bytes": "3Mc6vR"
          }
        }
      ]
    }
  ]
}'
```

### Response

```json
{
  "jsonrpc": "2.0",
  "result": [
    {
      "pubkey": "CxELquR1gPP8wHe33gZ4QxqGB3sZ9RSwsJ2KshVewkFY",
      "account": {
        "data": "2R9jLfiAQ9bgdcw6h8s44439",
        "executable": false,
        "lamports": 15298080,
        "owner": "4Nd1mBQtrMJVYVfKf2PJy9NZUZdTAsp7D4xWLs4gDB4T",
        "rentEpoch": 28,
        "space": 42
      }
    }
  ],
  "id": 1
}
```

---

## getMultipleAccounts

Returns the account information for a list of Pubkeys.

### params

**array** required - An array of Pubkeys to query, as base-58 encoded strings (up to a maximum of 100)

**object** optional - Configuration object containing the following fields:

**commitment** - string
**minContextSlot** - number
**encoding** - string
**dataSlice** - object

### result

**array** - The result will be an array containing either:

- **null** - if the account at that Pubkey doesn't exist, or
- **Account objects** with the following fields:

**data** - [string,encoding] | object
**executable** - bool
**lamports** - u64
**owner** - string
**rentEpoch** - u64
**space** - u64

### Example

```bash
curl https://api.devnet.solana.com -s -X \
POST -H "Content-Type: application/json" -d '
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "getMultipleAccounts",
  "params": [
    [
      "vines1vzrYbzLMRdu58ou5XTby4qAqVRLmqo36NKPTg",
      "4fYNw3dojWmQ4dXtSGE9epjRGy9pFSx62YypT7avPYvA"
    ],
    {
      "encoding": "base58",
      "commitment": "finalized"
    }
  ]
}'
```

### Response

```json
{
  "jsonrpc": "2.0",
  "result": {
    "context": { "apiVersion": "2.0.15", "slot": 341197@ },
    "value": [
      {
        "data": ["", "base58"],
        "executable": false,
        "lamports": 0997629433,
        "owner": "2wUaR463jJu6ScEJuNimr6GdC5mNYo8pTmd6ppJgmQjM",
        "rentEpoch": 184446@07309551615,
        "space": 0
      },
      {
        "data": ["", "base58"],
        "executable": false,
        "lamports": 0,
        "owner": "11111111111111111111111111111111",
        "rentEpoch": 184446@07309551615,
        "space": 0
      }
    ]
  },
  "id": 1
}
```

---

## getEpochInfo

Returns information about the current epoch

### params

**object** optional - Configuration object.

**commitment** - string
**minContextSlot** - number

### result

**object** - The result field will be an object with the following fields:

**absoluteSlot** - u64
**blockHeight** - u64
**epoch** - u64
**slotIndex** - u64
**slotsInEpoch** - u64
**transactionCount** - u64 | null

### Example

```bash
curl https://api.devnet.solana.com -s -X \
POST -H "Content-Type: application/json" -d '
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "getEpochInfo",
  "params": [
    {
      "commitment": "finalized"
    }
  ]
}'
```

### Response

```json
{
  "jsonrpc": "2.0",
  "result": {
    "absoluteSlot": 166598,
    "blockHeight": 166508,
    "epoch": 27,
    "slotIndex": 2790,
    "slotsInEpoch": 8192,
    "transactionCount": 22661893
  },
  "id": 1
}
```

---

## getRecentPerformanceSamples

Returns a list of recent performance samples, in reverse slot order. Performance samples are taken every 60 seconds and include the number of transactions and slots that occur in a given time window.

### params

**usize** optional - Number of samples to return (maximum 720)

### result

**array** - An array of performance sample objects containing:

**slot** - u64
**numTransactions** - u64
**numSlots** - u64
**samplePeriodSecs** - u16
**numNonvoteTransactions** - u64

### Example

```bash
curl https://api.devnet.solana.com -s -X \
POST -H "Content-Type: application/json" -d '
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "getRecentPerformanceSamples",
  "params": [
    2
  ]
}'
```

### Response

```json
{
  "jsonrpc": "2.0",
  "result": [
    {
      "slot": 348195,
      "numTransactions": 126,
      "numSlots": 126,
      "samplePeriodSecs": 60,
      "numNonvoteTransactions": 1
    },
    {
      "slot": 347999,
      "numTransactions": 126,
      "numSlots": 126,
      "samplePeriodSecs": 60,
      "numNonvoteTransactions": 1
    }
  ],
  "id": 1
}
```

---

## getSignatureStatuses

Returns the statuses of a list of signatures. Each signature must be a **txid**, the first signature of a transaction.

**Unless the `searchTransactionHistory` configuration parameter is included, this method only searches the recent status cache of signatures, which retains statuses for all active slots plus `MAX_RECENT_BLOCKHASHES` rooted slots.**

### params

**array** required optional - An array of transaction signatures to confirm (up to a maximum of 256)

**object** optional - Configuration object containing the following field:

**searchTransactionHistory** - bool

### result

**array** - An array of **RpcResponse<object>** consisting of either:

- **null** - or an object containing the following fields:

**slot** - u64
**confirmations** - usize | null
**err** - object | null
**status** - object
**confirmationStatus** - string | null

### Example

```bash
curl https://api.devnet.solana.com -s -X \
POST -H "Content-Type: application/json" -d '
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "getSignatureStatuses",
  "params": [
    [
      "4cd40Xfrz2et3xfd2g9nwgjXmH5j9WcY3wD8rNND7rG9vzycuvU",
      "5VERv8NMvzbJMEkV8xnrLkEaWRtSz9CosKDYjCJjBRnbJLgp8uirBgmQpjKhoR4tjF3ZpRzrFmBV6UjKdiSZkQUW"
    ],
    {
      "searchTransactionHistory": true
    }
  ]
}'
```

### Response

```json
{
  "jsonrpc": "2.0",
  "result": {
    "context": {
      "slot": 82
    },
    "value": [
      {
        "slot": 48,
        "confirmations": null,
        "err": null,
        "status": {
          "Ok": null
        },
        "confirmationStatus": "finalized"
      },
      null
    ]
  },
  "id": 1
}
```

---

## Additional Notes

### Rate Limiting

When making RPC calls, be mindful of rate limits imposed by public RPC endpoints. For production applications, consider:

- Using a dedicated RPC provider (Helius, QuickNode, Alchemy, etc.)
- Implementing request caching
- Batching multiple requests when possible

### Error Handling

Always implement proper error handling for RPC calls:

```javascript
try {
  const response = await connection.getAccountInfo(publicKey);
  if (!response) {
    console.log('Account does not exist');
  }
} catch (error) {
  console.error('RPC call failed:', error);
}
```

### Best Practices for Rent-Reclaim Bot

1. **Use `getProgramAccounts` with filters** to find Kora-sponsored accounts
2. **Use `getMultipleAccounts` in batches** to check account status efficiently
3. **Monitor `getEpochInfo`** to track rent collection cycles
4. **Use `getSignatureStatuses`** to verify reclaim transaction completion
5. **Implement exponential backoff** for failed RPC calls
6. **Cache account data** when appropriate to reduce RPC load

